package: "android.multiuser"
container: "system"

flag {
    name: "save_global_and_guest_restrictions_on_system_user_xml"
    namespace: "multiuser"
    description: "Save guest and device policy global restrictions on the SYSTEM user's XML file."
    bug: "301067944"
}

flag {
    name: "save_global_and_guest_restrictions_on_system_user_xml_read_only"
    namespace: "multiuser"
    description: "Save guest and device policy global restrictions on the SYSTEM user's XML file. (Read only flag)"
    bug: "301067944"
    is_fixed_read_only: true
}

flag {
    name: "bind_wallpaper_service_on_its_own_thread_during_a_user_switch"
    namespace: "multiuser"
    description: "Bind wallpaper service on its own thread instead of system_server's main handler during a user switch."
    bug: "302100344"
}

flag {
    name: "support_communal_profile"
    is_exported: true
    namespace: "multiuser"
    description: "Framework support for communal profile."
    bug: "285426179"
}

flag {
    name: "consistent_max_users"
    namespace: "multiuser"
    description: "Makes max supported users be consistent and fine-grained."
    bug: "394178333"
}

flag {
    name: "consistent_max_users_including_guests"
    namespace: "multiuser"
    description: "Builds on consistent_max_users, making Guest users included in the max."
    bug: "394178333"
}

flag {
    name: "max_users_in_car_is_for_secondary"
    namespace: "multiuser"
    description: "Update Car SystemUi and Settings to specify FULL_SECONDARY for max users (alongside consistent_max_users flag)."
    bug: "394178333"
}

flag {
    name: "support_communal_profile_nextgen"
    is_exported: true
    namespace: "multiuser"
    description: "Further framework support for communal profile, beyond the basics, for later releases."
    bug: "285426179"
}

flag {
    name: "use_all_cpus_during_user_switch"
    namespace: "multiuser"
    description: "Allow using all cpu cores during a user switch."
    bug: "308105403"
}

# Begin Multiuser Widget flags #

flag {
    name: "multiuser_widget"
    namespace: "multiuser"
    description: "Implement the Multiuser Widget"
    bug: "365748524"
}

flag {
    name: "widget_current_user_view"
    namespace: "multiuser"
    description: "When flag is enabled, widget shows the current user only"
    bug: "409327566"
}

flag {
    name: "widget_scaling_bugfix"
    namespace: "multiuser"
    description: "When flag is enabled, scaling fixes are applied to the widget"
    bug: "430040190"
    metadata {
        purpose: PURPOSE_BUGFIX
    }
}


# End Multiuser Widget flags #

flag {
    name: "enable_biometrics_to_unlock_private_space"
    is_exported: true
    namespace: "profile_experiences"
    description: "Add support to unlock the private space using biometrics"
    bug: "312184187"
}

flag {
    name: "support_autolock_for_private_space"
    namespace: "profile_experiences"
    description: "Add support to lock private space automatically after a time period"
    bug: "303201022"
}

flag {
    name: "allow_resolver_sheet_for_private_space"
    namespace: "profile_experiences"
    description: "Add support for Private Space in resolver sheet"
    bug: "307515485"
}

flag {
    name: "move_quiet_mode_operations_to_separate_thread"
    namespace: "profile_experiences"
    description: "Move the quiet mode operations, happening on a background thread today, to a separate thread."
    bug: "320483504"
}

flag {
    name: "enable_private_space_autolock_on_restarts"
    namespace: "profile_experiences"
    description: "Enable auto-locking private space on device restarts"
    bug: "296993385"
}

flag {
    name: "enable_system_user_only_for_services_and_providers"
    is_exported: true
    namespace: "multiuser"
    description: "Enable systemUserOnly manifest attribute for services and providers."
    bug: "302354856"
    is_fixed_read_only: true
}

flag {
    name: "fix_avatar_content_provider_null_authority"
    namespace: "multiuser"
    description: "Fix crash when content provider authority is null."
    bug: "362880068"
    metadata {
        purpose: PURPOSE_BUGFIX
  }
}

flag {
    name: "property_invalidated_cache_bypass_mismatched_uids"
    namespace: "multiuser"
    description: "Bypass the cache when the process UID does not match the binder UID."
    bug: "373752556"
    metadata {
        purpose: PURPOSE_BUGFIX
  }
  is_fixed_read_only: true
}

flag {
    name: "cache_profile_type_read_only"
    namespace: "multiuser"
    description: "Cache getProfileType to avoid unnecessary binder calls"
    bug: "350417403"
    metadata {
        purpose: PURPOSE_BUGFIX
  }
  is_fixed_read_only: true
}

flag {
    name: "cache_user_info_read_only"
    namespace: "multiuser"
    description: "Cache UserInfo to avoid unnecessary binder calls"
    bug: "161915546"
    metadata {
        purpose: PURPOSE_BUGFIX
  }
  is_fixed_read_only: true
}

flag {
    name: "cache_user_start_realtime_read_only"
    namespace: "multiuser"
    description: "Cache getUserStartRealtime to avoid unnecessary binder calls"
    bug: "350416205"
    metadata {
        purpose: PURPOSE_BUGFIX
  }
  is_fixed_read_only: true
}

flag {
    name: "cache_user_unlock_realtime_read_only"
    namespace: "multiuser"
    description: "Cache getUserUnlockRealtime to avoid unnecessary binder calls"
    bug: "350421407"
    metadata {
        purpose: PURPOSE_BUGFIX
  }
  is_fixed_read_only: true
}

flag {
    name: "cache_user_restrictions_read_only"
    namespace: "multiuser"
    description: "Cache hasUserRestriction to avoid unnecessary binder calls"
    bug: "350419621"
    metadata {
        purpose: PURPOSE_BUGFIX
  }
  is_fixed_read_only: true
}

# This flag guards the private space feature and all its implementations excluding the APIs. APIs are guarded by android.os.Flags.allow_private_profile.
flag {
    name: "enable_private_space_features"
    namespace: "profile_experiences"
    description: "Enable the support for private space and all its sub-features"
    bug: "286418785"
}

flag {
    name: "enable_permission_to_access_hidden_profiles"
    is_exported: true
    namespace: "profile_experiences"
    description: "Add permission to access API hidden users data via system APIs"
    bug: "321988638"
}

flag {
    name: "handle_interleaved_settings_for_private_space"
    namespace: "profile_experiences"
    description: "Handle listing of private space apps in settings pages with interleaved content"
    bug: "323212460"
}

flag {
    name: "enable_hiding_profiles"
    namespace: "profile_experiences"
    description: "Allow the use of a profileApiAvailability user property to exclude HIDDEN profiles in API results"
    bug: "316362775"
}

flag {
    name: "reorder_wallpaper_during_user_switch"
    namespace: "multiuser"
    description: "Reorder loading home and lock screen wallpapers during a user switch."
    bug: "324911115"
}

flag {
    name: "set_power_mode_during_user_switch"
    namespace: "multiuser"
    description: "Set power mode during a user switch."
    bug: "325249845"
}

flag {
    name: "schedule_stop_of_background_user"
    namespace: "multiuser"
    description: "Schedule background users to be stopped at a future point. Infrastructure only."
    bug: "330351042"
}

flag {
    name: "schedule_stop_of_background_user_by_default"
    namespace: "multiuser"
    description: "Activates the background-stopping schedule of inactive users based on the time specified in the configuration."
    bug: "330351042"
}

flag {
    name: "stop_excess_for_background_starts"
    namespace: "multiuser"
    description: "Be more aggressive when stopping excess users, by triggering this even on background user starts and by allowing user 0's profiles to be stopped."
    bug: "419867128"
}

flag {
    name: "reschedule_stop_if_visible_activities"
    namespace: "multiuser"
    description: "Don't automatically stop a background user that has a top visible activity; instead, reschedule it to stop later"
    bug: "423731424"
}

flag {
    name: "stop_previous_user_apps"
    namespace: "multiuser"
    description: "Stop the previous user apps early in a user switch"
    bug: "323200731"
}

flag {
    name: "disable_private_space_items_on_home"
    namespace: "profile_experiences"
    description: "Disables adding items belonging to Private Space on Home Screen manually as well as automatically"
    bug: "287975131"
}

flag {
    name: "enable_ps_sensitive_notifications_toggle"
    namespace: "profile_experiences"
    description: "Enable the sensitive notifications toggle to be visible in the Private space settings page"
    bug: "317067050"
}

flag {
    name: "enable_private_space_intent_redirection"
    namespace: "profile_experiences"
    description: "Enable Private Space telephony and SMS intent redirection to the main user"
    bug: "325576602"
}

flag {
    name: "block_private_space_creation"
    namespace: "profile_experiences"
    description: "Allow blocking private space creation based on specific conditions"
    bug: "290333800"
    is_fixed_read_only: true
}

flag {
    name: "allow_main_user_to_access_blocked_number_provider"
    namespace: "multiuser"
    description: "Allow MAIN user to access blocked number provider"
    bug: "338579331"
}

flag {
    name: "restrict_quiet_mode_credential_bug_fix_to_managed_profiles"
    namespace: "profile_experiences"
    description: "Use user states to check the state of quiet mode for managed profiles only"
    bug: "332812630"
    metadata {
      purpose: PURPOSE_BUGFIX
    }
}

flag {
  name: "use_private_space_icon_in_biometric_prompt"
  namespace: "profile_experiences"
  description: "Update the biometric prompt from generic Settings icon to private space icon"
  bug: "333528540"
  metadata {
    purpose: PURPOSE_BUGFIX
  }
}

flag {
  name: "modify_private_space_secondary_unlock_setup_flow"
  namespace: "profile_experiences"
  description: "Updates to setting up secondary unlock factor from Settings for the first time"
  bug: "332850595"
  metadata {
    purpose: PURPOSE_BUGFIX
  }
}

flag {
  name: "fix_large_display_private_space_settings"
  namespace: "profile_experiences"
  description: "Fix tablet and foldable specific bugs for private space"
  bug: "342563741"
  metadata {
    purpose: PURPOSE_BUGFIX
  }
}

flag {
  name: "unicorn_mode_refactoring_for_hsum_read_only"
  namespace: "multiuser"
  description: "Refactorings related to unicorn mode to work on HSUM mode (Read only flag)"
  bug: "339201286"
  is_fixed_read_only: true
  metadata {
    purpose: PURPOSE_BUGFIX
  }
}

flag {
  name: "show_custom_unlock_title_inside_private_profile"
  namespace: "profile_experiences"
  description: "When private space is unlocked show dynamic title in unlock factor screens based on lock factor set for the profile"
  bug: "323835257"
  metadata {
    purpose: PURPOSE_BUGFIX
  }
}

flag {
    name: "add_launcher_user_config"
    namespace: "profile_experiences"
    description: "Add support for LauncherUserInfo configs"
    bug: "346553745"
    is_exported: true
}

flag {
     name: "logout_user_api"
     namespace: "multiuser"
     description: "Add API to logout user"
     bug: "350045389"
}

flag {
    name: "enable_moving_content_into_private_space"
    namespace: "profile_experiences"
    description: "Enable moving content into the Private Space"
    bug: "360066001"
    is_exported: true
}

flag {
    name: "allow_supervising_profile"
    namespace: "supervision"
    description: "Enables support for new supervising user type"
    bug: "389712089"
}

flag {
     name: "profiles_for_all"
     namespace: "multiuser"
     description: "Allows any regular user to have profiles"
     bug: "374832167"
}

flag {
     name: "perfetto_multiuser_table"
     namespace: "multiuser"
     description: "Generate file for perfetto, so it can create a users table"
     bug: "391110239"
}

flag {
    name: "backup_activated_for_all_users"
    namespace: "multiuser"
    description: "Activate backup for all users in headless system user mode (HSUM)."
    bug: "374830726"
    is_fixed_read_only: true
}

flag {
     name: "create_initial_user"
     namespace: "multiuser"
     description: "Creates a non-main user on boot when device is HSUM and doesn't support main user"
     bug: "409650316"
}

flag {
     name: "demote_main_user"
     namespace: "multiuser"
     description: "Remove the FLAG_MAIN on boot when the device doesn't support Main User anymore"
     bug: "402486365"
}

flag {
    name: "setupwizard_username_population"
    namespace: "multiuser"
    description: "Ensures the user's account name is correctly populated and persisted during the Android Setup Wizard across all flows."
    bug: "389209342"
    metadata {
      purpose: PURPOSE_BUGFIX
    }
}

flag {
    name: "move_set_screen_lock_dialog_to_settings_app"
    namespace: "profile_experiences"
    description: "Move the set screen lock dialog and activity from the platform to the Settings app for theming."
    bug: "407327874"
    metadata {
      purpose: PURPOSE_BUGFIX
    }
}

flag {
     name: "disallow_removing_last_admin_user"
     namespace: "multiuser"
     description: "Disallow the removal of a user, if it is the last admin user"
     bug: "394970894"
}
